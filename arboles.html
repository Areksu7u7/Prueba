<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador de √Årboles Binarios | TRON</title>
    <link rel="stylesheet" href="arboles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üå≥ VISUALIZADOR | √ÅRBOLES BINARIOS</h1>
            <p>Construye, visualiza y analiza √°rboles binarios de forma interactiva</p>
            <button class="btn btn-secondary" id="backToGrafosBtn" title="Volver a Grafos" onclick="window.location.href='grafos johnson.html'" style="position:absolute; top:16px; left:16px; width:44px; height:44px; padding:0; display:flex; align-items:center; justify-content:center;">‚§∫</button>
            <button class="help-btn" id="helpBtn">?</button>
        </div>
        
        <div class="main-content">
            <!-- Panel izquierdo: Controles -->
            <div class="panel left-panel">
                <h2 class="panel-title">
                    ‚öôÔ∏è CONTROLES
                    <span class="info-icon tooltip">‚ÑπÔ∏è
                        <span class="tooltiptext">Desde aqu√≠ puedes crear y modificar √°rboles binarios usando diferentes m√©todos</span>
                    </span>
                </h2>
                
                <!-- Tabs para cambiar entre modos -->
                <div class="tabs">
                    <button class="tab active" data-tab="array">Array</button>
                    <button class="tab" data-tab="traversals">Recorridos</button>
                    <button class="tab" data-tab="operations">Operaciones</button>
                </div>
                
                <!-- Modo Array -->
                <div class="tab-content active" id="arrayTab">
                    <div class="alert alert-warning">
                        <span>‚ö†Ô∏è</span>
                        <div>Se crear√°n √Årboles Binarios de B√∫squeda (BST) balanceados autom√°ticamente</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="arrayInput">Introduce n√∫meros o letras separados por comas:</label>
                        <input type="text" id="arrayInput" placeholder="Ej: 5,3,7,1,9,2,8 o A,C,B,E,D">
                    </div>
                    
                    <div class="input-group">
                        <label for="arrayType">Tipo de datos:</label>
                        <select id="arrayType">
                            <option value="numbers">N√∫meros</option>
                            <option value="letters">Letras</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-success" id="buildFromArrayBtn">
                        üå≥ CREAR √ÅRBOL BINARIO
                    </button>

                    <!-- A√±adir un solo valor directamente al √°rbol -->
                    <div class="input-group">
                        <label for="addSingleValueInput">A√±adir un solo valor al √°rbol:</label>
                        <input type="text" id="addSingleValueInput" placeholder="Ej: 7 o G">
                        <button class="btn btn-success" id="addSingleValueBtn">
                            ‚ûï A√ëADIR AL √ÅRBOL
                        </button>
                    </div>
                </div>
                
                <!-- Modo Recorridos - MEJORADO -->
                <div class="tab-content" id="traversalsTab">
                    <div class="alert alert-warning">
                        <span>‚ÑπÔ∏è</span>
                        <div>Selecciona un m√©todo de reconstrucci√≥n y proporciona los recorridos necesarios</div>
                    </div>
                    
                    <!-- Selector de m√©todo de reconstrucci√≥n ACTUALIZADO -->
                    <div class="reconstruction-method">
                        <div class="method-btn active" data-method="preorder-inorder">
                            Preorden + Inorden
                        </div>
                        <div class="method-btn" data-method="inorder-postorder">
                            Inorden + Postorden
                        </div>
                        <div class="method-btn" data-method="preorder-postorder">
                            Preorden + Postorden
                        </div>
                    </div>
                    
                    <!-- Explicaci√≥n del m√©todo seleccionado -->
                    <div class="traversal-explanation" id="traversalExplanation">
                        <h4>üìã Preorden + Inorden</h4>
                        <p>Proporciona los recorridos <strong>Preorden</strong> y <strong>Inorden</strong> para reconstruir el √°rbol √∫nico.</p>
                        <p><strong>Preorden:</strong> Ra√≠z ‚Üí Izquierda ‚Üí Derecha</p>
                        <p><strong>Inorden:</strong> Izquierda ‚Üí Ra√≠z ‚Üí Derecha</p>
                        <p><em>‚úÖ Esta combinaci√≥n siempre produce un √°rbol √∫nico</em></p>
                    </div>
                    
                    <!-- Campos para Preorden + Inorden -->
                    <div class="traversal-inputs active" id="preorderInorderInputs">
                        <div class="input-group">
                            <label for="preorderInput">Preorden (Ra√≠z-Izq-Der):</label>
                            <input type="text" id="preorderInput" placeholder="Ej: A,B,D,E,C,F">
                        </div>
                        
                        <div class="input-group">
                            <label for="inorderInput">Inorden (Izq-Ra√≠z-Der):</label>
                            <input type="text" id="inorderInput" placeholder="Ej: D,B,E,A,F,C">
                        </div>
                        
                        <button class="btn" id="reconstructFromPreInBtn">
                            üîÑ RECONSTRUIR DESDE PREORDEN+INORDEN
                        </button>
                    </div>
                    
                    <!-- Campos para Inorden + Postorden -->
                    <div class="traversal-inputs" id="inorderPostorderInputs">
                        <div class="input-group">
                            <label for="inorderInput2">Inorden (Izq-Ra√≠z-Der):</label>
                            <input type="text" id="inorderInput2" placeholder="Ej: D,B,E,A,F,C">
                        </div>
                        
                        <div class="input-group">
                            <label for="postorderInput">Postorden (Izq-Der-Ra√≠z):</label>
                            <input type="text" id="postorderInput" placeholder="Ej: D,E,B,F,C,A">
                        </div>
                        
                        <button class="btn" id="reconstructFromInPostBtn">
                            üîÑ RECONSTRUIR DESDE INORDEN+POSTORDEN
                        </button>
                    </div>
                    
                    <!-- NUEVO: Campos para Preorden + Postorden -->
                    <div class="traversal-inputs" id="preorderPostorderInputs">
                        <div class="input-group">
                            <label for="preorderInput3">Preorden (Ra√≠z-Izq-Der):</label>
                            <input type="text" id="preorderInput3" placeholder="Ej: A,B,D,C,E,F">
                        </div>
                        
                        <div class="input-group">
                            <label for="postorderInput2">Postorden (Izq-Der-Ra√≠z):</label>
                            <input type="text" id="postorderInput2" placeholder="Ej: D,B,E,F,C,A">
                        </div>
                        
                        <button class="btn" id="reconstructFromPrePostBtn">
                            üîÑ RECONSTRUIR DESDE PREORDEN+POSTORDEN
                        </button>
                    </div>
                </div>
                
                <!-- Modo Operaciones -->
                <div class="tab-content" id="operationsTab">
                    <div class="alert alert-warning">
                        <span>‚ÑπÔ∏è</span>
                        <div>Operaciones individuales sobre el √°rbol actual</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="insertNodeInput">Insertar nodo:</label>
                        <input type="text" id="insertNodeInput" placeholder="Valor del nodo">
                        <button class="btn btn-success" id="insertNodeBtn">
                            ‚ûï INSERTAR NODO
                        </button>
                    </div>
                    
                    <div class="input-group">
                        <label for="deleteNodeInput">Eliminar nodo:</label>
                        <input type="text" id="deleteNodeInput" placeholder="Valor del nodo">
                        <button class="btn btn-danger" id="deleteNodeBtn">
                            üóëÔ∏è ELIMINAR NODO
                        </button>
                    </div>
                    
                    <div class="input-group">
                        <label for="searchNodeInput">Buscar nodo:</label>
                        <input type="text" id="searchNodeInput" placeholder="Valor del nodo">
                        <button class="btn btn-warning" id="searchNodeBtn">
                            üîç BUSCAR NODO
                        </button>
                    </div>
                    
                    <div class="input-group">
                        <button class="btn btn-secondary" id="generateRandomTreeBtn">
                            üé≤ GENERAR √ÅRBOL ALEATORIO
                        </button>
                    </div>
                </div>
                
                <!-- Recorridos -->
                <div class="input-group">
                    <h3 class="panel-title">
                        üìä RECORRIDOS
                        <span class="info-icon tooltip">‚ÑπÔ∏è
                            <span class="tooltiptext">Realiza diferentes tipos de recorridos sobre el √°rbol actual y visualiza los resultados</span>
                        </span>
                    </h3>
                    <button class="btn btn-secondary" id="showPreorderBtn">
                        üìã PREORDEN
                    </button>
                    <button class="btn btn-secondary" id="showInorderBtn">
                        üìä INORDEN
                    </button>
                    <button class="btn btn-secondary" id="showPostorderBtn">
                        üìù POSTORDEN
                    </button>
                    <button class="btn btn-secondary" id="animateTraversalBtn">
                        üé¨ ANIMAR RECORRIDO
                    </button>
                </div>
                
                <!-- Gesti√≥n de archivos -->
                <div class="input-group">
                    <h3 class="panel-title">
                        üíæ GESTI√ìN DE ARCHIVOS
                        <span class="info-icon tooltip">‚ÑπÔ∏è
                            <span class="tooltiptext">Guarda y carga √°rboles desde archivos JSON para uso posterior</span>
                        </span>
                    </h3>
                    <button class="btn btn-success" id="exportTreeBtn">
                        üíæ EXPORTAR √ÅRBOL
                    </button>
                    <input type="file" id="importTreeFile" class="file-upload" accept=".json">
                    <label for="importTreeFile" class="file-label">
                        üìÇ IMPORTAR √ÅRBOL
                    </label>
                    <button class="btn btn-danger" id="clearTreeBtn">
                        üóëÔ∏è LIMPIAR TODO
                    </button>
                </div>
                
                <!-- Ejemplos -->
                <div class="input-group">
                    <h3 class="panel-title">
                        üí° EJEMPLOS
                        <span class="info-icon tooltip">‚ÑπÔ∏è
                            <span class="tooltiptext">Carga ejemplos predefinidos para explorar las funcionalidades</span>
                        </span>
                    </h3>
                    <div class="examples">
                        <button class="btn btn-secondary" id="exampleArrayNumbersBtn">
                            üî¢ N√öMEROS
                        </button>
                        <button class="btn btn-secondary" id="exampleArrayLettersBtn">
                            üî§ LETRAS
                        </button>
                        <button class="btn btn-secondary" id="exampleTraversalsBtn">
                            üîÑ RECORRIDOS
                        </button>
                        <button class="btn btn-secondary" id="exampleComplexTreeBtn">
                            üåê √ÅRBOL COMPLEJO
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Panel central: Visualizaci√≥n -->
            <div class="panel visualization-area">
                <canvas id="treeCanvas"></canvas>
                <div class="empty-state" id="emptyState">
                    <h3>üå≥ √ÅRBOL VAC√çO</h3>
                    <p>Usa los controles del panel izquierdo para crear tu primer √°rbol binario</p>
                </div>
            </div>
            
            <!-- Panel derecho: Informaci√≥n y resultados -->
            <div class="panel right-panel">
                <h2 class="panel-title">
                    üìä INFORMACI√ìN
                    <span class="info-icon tooltip">‚ÑπÔ∏è
                        <span class="tooltiptext">M√©tricas y propiedades del √°rbol actualmente visualizado</span>
                    </span>
                </h2>
                
                <div class="tree-info">
                    <div class="info-card">
                        <div class="value" id="nodeCount">0</div>
                        <div class="label">NODOS</div>
                    </div>
                    <div class="info-card">
                        <div class="value" id="treeHeight">0</div>
                        <div class="label">ALTURA</div>
                    </div>
                    <div class="info-card">
                        <div class="value" id="treeLevels">0</div>
                        <div class="label">NIVELES</div>
                    </div>
                    <div class="info-card">
                        <div class="value" id="treeBalanced">NO</div>
                        <div class="label">BALANCEADO</div>
                    </div>
                </div>
                
                <div class="results" id="resultsContainer">
                    <div class="alert alert-success">
                        <span>‚úÖ</span>
                        <div>Listo para crear √°rboles binarios</div>
                    </div>
                </div>
                
                <div class="result-item" id="preorderResult" style="display: none;">
                    <h4>üìã PREORDEN</h4>
                    <p id="preorderText"></p>
                </div>
                
                <div class="result-item" id="inorderResult" style="display: none;">
                    <h4>üìä INORDEN</h4>
                    <p id="inorderText"></p>
                </div>
                
                <div class="result-item" id="postorderResult" style="display: none;">
                    <h4>üìù POSTORDEN</h4>
                    <p id="postorderText"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de ayuda -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal">
            <div class="modal-header">
                <h2>üìö GU√çA DE USO - VISUALIZADOR DE √ÅRBOLES BINARIOS</h2>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h3>üå≥ ¬øQU√â ES UN √ÅRBOL BINARIO?</h3>
                    <p>Un √°rbol binario es una estructura de datos jer√°rquica donde cada nodo tiene como m√°ximo dos hijos (izquierdo y derecho).</p>
                    <p>En este visualizador, trabajamos principalmente con <strong>√Årboles Binarios de B√∫squeda (BST)</strong>, donde:</p>
                    <ul>
                        <li>Todos los valores en el sub√°rbol izquierdo son menores que el valor del nodo</li>
                        <li>Todos los valores en el sub√°rbol derecho son mayores que el valor del nodo</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>‚öôÔ∏è M√âTODOS DE CREACI√ìN</h3>
                    <p><strong>Desde Array:</strong> Introduce valores separados por comas. El sistema crear√° autom√°ticamente un BST balanceado.</p>
                    <p><strong>Desde Recorridos:</strong> Proporciona dos de los tres recorridos para reconstruir el √°rbol:</p>
                    <ul>
                        <li><strong>Preorden + Inorden:</strong> ‚úÖ Siempre produce un √°rbol √∫nico</li>
                        <li><strong>Inorden + Postorden:</strong> ‚úÖ Siempre produce un √°rbol √∫nico</li>
                        <li><strong>Preorden + Postorden:</strong> ‚ö†Ô∏è <strong>NO siempre</strong> produce un √°rbol √∫nico. Solo funciona para √°rboles completos.</li>
                    </ul>
                    <p><strong>Operaciones Individuales:</strong> Inserta, elimina o busca nodos espec√≠ficos en el √°rbol actual.</p>
                </div>

                <div class="help-section">
                    <h3>üìä RECORRIDOS DEL √ÅRBOL</h3>
                    <p>Puedes visualizar los diferentes recorridos del √°rbol actual:</p>
                    <ul>
                        <li><strong>Preorden:</strong> Muestra el orden en que los nodos ser√≠an visitados comenzando por la ra√≠z</li>
                        <li><strong>Inorden:</strong> Muestra los valores en orden ascendente (para BST)</li>
                        <li><strong>Postorden:</strong> Muestra el orden de eliminaci√≥n de nodos (de las hojas hacia la ra√≠z)</li>
                    </ul>
                    <p>La funci√≥n de <strong>animaci√≥n</strong> te permite visualizar paso a paso c√≥mo se realiza cada recorrido con efectos de luz que simulan tuber√≠as.</p>
                </div>

                <div class="help-section">
                    <h3>üíæ GESTI√ìN DE ARCHIVOS</h3>
                    <p><strong>Exportar:</strong> Guarda el √°rbol actual en un archivo JSON que incluye todos los recorridos y metadatos.</p>
                    <p><strong>Importar:</strong> Carga un √°rbol previamente guardado desde un archivo JSON.</p>
                    <p><strong>Limpiar:</strong> Elimina el √°rbol actual para comenzar de nuevo.</p>
                </div>

                <div class="help-section">
                    <h3>üí° CONSEJOS DE USO</h3>
                    <ul>
                        <li>Comienza con los ejemplos predefinidos para familiarizarte con la herramienta</li>
                        <li>Usa la animaci√≥n de recorridos para entender mejor c√≥mo funcionan los algoritmos</li>
                        <li>Experimenta con diferentes tama√±os de √°rbol para ver c√≥mo afecta la visualizaci√≥n</li>
                        <li>Exporta tus √°rboles m√°s interesantes para compartirlos o usarlos m√°s tarde</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>üîç INFORMACI√ìN DEL √ÅRBOL</h3>
                    <p>El panel derecho muestra informaci√≥n importante sobre el √°rbol actual:</p>
                    <ul>
                        <li><strong>Nodos:</strong> N√∫mero total de nodos en el √°rbol</li>
                        <li><strong>Altura:</strong> Longitud del camino m√°s largo desde la ra√≠z hasta una hoja</li>
                        <li><strong>Niveles:</strong> N√∫mero de niveles en el √°rbol (igual a la altura)</li>
                        <li><strong>Balanceado:</strong> Indica si el √°rbol est√° balanceado (diferencia de altura entre sub√°rboles ‚â§ 1)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="arboles.js"></script>
</body>
</html>