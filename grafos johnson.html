<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grafo an√°lisis de algoritmos</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="title">GRAFOS-ANALISIS DE ALGORITMOS</div>
    <!-- Top Navigation Tabs -->
    <div class="topbar">
        <div class="tabs">
            <button id="toggleMode" class="tab-btn" title="Cambiar entre modo normal y Johnson">üîÑ Modo: Normal</button>
            <button id="toggleAssignmentMode" class="tab-btn" title="Cambiar a modo Asignaci√≥n">üßÆ Modo: Asignaci√≥n</button>
            <button id="clearGraph" class="tab-btn" title="Limpiar todo el grafo">üßπ Limpiar Grafo</button>
            <button id="generateMatrix" class="tab-btn" title="Ver/editar la matriz de adyacencia">üî¢ Matriz</button>
            <button id="saveGraph" class="tab-btn" title="Exportar el grafo a JSON">üíæ Exportar</button>
            <button id="loadGraph" class="tab-btn" title="Importar un grafo desde JSON">üìÇ Importar</button>
            <a id="openHelp" class="tab-btn" title="Ver ayuda" href="ayuda.html" target="_blank" rel="noopener">üìò Ayuda</a>
            <a id="openHelp" class="tab-btn" title="Ver ayuda" href="sort.html" target="_blank" rel="noopener">üîÄ Sort</a>
            <!-- Analysis dropdown: Johnson and Assignment (Max/Min) -->
            <div class="dropdown analysis">
                <button class="dropdown-toggle tab-btn critical" id="analysisDropdown">‚ö° An√°lisis ‚ñæ</button>
                <div class="dropdown-menu" id="analysisMenu">
                    <button class="dropdown-item" id="analysisJohnson">Maximizar/Minimizar (Johnson)</button>
                    <div class="dropdown-item has-submenu" id="assignmentSub">
                        Asignaci√≥n ‚ñ∏
                        <div class="dropdown-menu submenu" id="assignmentMenu">
                            <button class="dropdown-item" id="assignMaxBtn">Maximizar</button>
                            <button class="dropdown-item" id="assignMinBtn">Minimizar</button>
                        </div>
                    </div>
                    <button class="dropdown-item" id="northwestBtn">üöö NorthWest (Transporte)</button>
                </div>
            </div>
        </div>
        <div class="right-controls">
            <!-- Dropdown de colores -->
            <div class="dropdown">
                <button class="dropdown-toggle" id="colorsDropdown">üé® Colores ‚ñæ</button>
                <div class="dropdown-menu" id="colorsMenu">
                    <div class="dropdown-row">
                        <label class="dropdown-label" for="nodeColor">Color de nodos</label>
                        <input type="color" id="nodeColor" value="#00f7ff" />
                    </div>
                    <div class="dropdown-row">
                        <label class="dropdown-label" for="edgeColor">Color de conexiones</label>
                        <input type="color" id="edgeColor" value="#00f7ff" />
                    </div>
                </div>
            </div>
            <!-- Dropdown de tipo de arista -->
            <div class="dropdown">
                <button class="dropdown-toggle" id="edgeTypeDropdown">Arista: <span id="edgeTypeLabel">Dirigida</span> ‚ñæ</button>
                <div class="dropdown-menu" id="edgeTypeMenu">
                    <button class="dropdown-item edge-type-option" data-value="directed">Dirigida</button>
                    <button class="dropdown-item edge-type-option" data-value="undirected">No Dirigida</button>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div id="canvas">
            <div class="grid"></div>
            <svg class="svg-container" width="100%" height="100%">
                <defs>
                    <marker id="arrowhead" class="arrow-marker" markerWidth="15" markerHeight="10" refX="14" refY="5" orient="auto"><polygon points="0 0,15 5,0 10" fill="var(--primary)"/></marker>
                    <marker id="arrowtail" class="arrow-marker" markerWidth="15" markerHeight="10" refX="1" refY="5" orient="auto"><polygon points="15 0,0 5,15 10" fill="var(--primary)"/></marker>
                </defs>
            </svg>
        </div>
        <!-- Sidebar eliminado; mantenemos select oculto fuera de la vista para compatibilidad si fuera necesario -->
        <div class="hidden"><select id="edgeType" aria-label="Tipo de arista"><option value="directed">Dirigida</option><option value="undirected">No Dirigida</option></select></div>
    </div>
    <div class="help-modal" id="helpModal">
        <div class="help-content">
            <div class="help-header">
                <div class="help-title">üìò Ayuda del Editor de Grafos</div>
                <button class="help-close" id="closeHelp">&times;</button>
            </div>
            <div class="help-search-container">
                <input type="text" id="helpSearch" placeholder="üîç Buscar en la ayuda..." class="help-search">
                <div class="search-results" id="searchResults"></div>
            </div>
            <div class="help-tabs">
                <button class="help-tab active" data-tab="basico">B√°sico</button>
                <button class="help-tab" data-tab="analisis">An√°lisis</button>
                <button class="help-tab" data-tab="herramientas">Herramientas</button>
                <button class="help-tab" data-tab="consejos">Consejos</button>
            </div>
            <div class="help-body">
                <!-- Pesta√±a B√°sico -->
                <div class="help-tab-content active" id="tab-basico">
                    <div class="help-section">
                        <h3>üéØ Introducci√≥n</h3>
                        <p>Este editor de grafos te permite crear, visualizar y analizar grafos dirigidos y no dirigidos. Puedes aplicar algoritmos de optimizaci√≥n como Johnson para encontrar rutas maximizadas y minimizadas.</p>
                        <div class="feature-highlights">
                            <div class="feature-item">
                                <div class="feature-icon">üîÑ</div>
                                <div class="feature-text">
                                    <strong>Modo Normal/Johnson</strong>
                                    <span>Cambia entre modos con restricciones diferentes</span>
                                </div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">‚ö°</div>
                                <div class="feature-text">
                                    <strong>An√°lisis Avanzado</strong>
                                    <span>Algoritmos de optimizaci√≥n integrados</span>
                                </div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">üé®</div>
                                <div class="feature-text">
                                    <strong>Personalizaci√≥n</strong>
                                    <span>Colores y tipos de aristas configurables</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="help-section">
                        <h3>üñ±Ô∏è Interacci√≥n B√°sica</h3>
                        <div class="help-subsection">
                            <h4>Crear y Mover Nodos</h4>
                            <div class="interaction-demo">
                                <div class="demo-item">
                                    <div class="demo-icon">üëÜ</div>
                                    <div class="demo-text">
                                        <strong>Clic en el lienzo</strong>
                                        <span>Crea un nuevo nodo</span>
                                    </div>
                                </div>
                                <div class="demo-item">
                                    <div class="demo-icon">üëÜüëÜ</div>
                                    <div class="demo-text">
                                        <strong>Arrastrar un nodo</strong>
                                        <span>Mueve el nodo a otra posici√≥n</span>
                                    </div>
                                </div>
                                <div class="demo-item">
                                    <div class="demo-icon">üëÜüëÜ</div>
                                    <div class="demo-text">
                                        <strong>Doble clic en un nodo</strong>
                                        <span>Lo selecciona para crear conexi√≥n</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="help-subsection">
                            <h4>Conectar Nodos</h4>
                            <div class="interaction-demo">
                                <div class="demo-item">
                                    <div class="demo-icon">üîó</div>
                                    <div class="demo-text">
                                        <strong>Doble clic en dos nodos</strong>
                                        <span>Crea una arista entre ellos</span>
                                    </div>
                                </div>
                                <div class="demo-item">
                                    <div class="demo-icon">‚öôÔ∏è</div>
                                    <div class="demo-text">
                                        <strong>Men√∫ "Arista"</strong>
                                        <span>Selecciona entre dirigida o no dirigida</span>
                                    </div>
                                </div>
                            </div>
                            <div class="restrictions">
                                <h5>Restricciones del Modo Johnson:</h5>
                                <ul>
                                    <li>‚ùå No se permiten bucles (conexiones de un nodo a s√≠ mismo)</li>
                                    <li>‚ùå No se permiten aristas en ambos sentidos entre los mismos nodos</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="help-subsection">
                            <h4>Editar Elementos</h4>
                            <div class="interaction-demo">
                                <div class="demo-item">
                                    <div class="demo-icon">‚úèÔ∏è</div>
                                    <div class="demo-text">
                                        <strong>Doble clic en peso de arista</strong>
                                        <span>Edita el valor del peso</span>
                                    </div>
                                </div>
                                <div class="demo-item">
                                    <div class="demo-icon">üñ±Ô∏è‚û°Ô∏è</div>
                                    <div class="demo-text">
                                        <strong>Clic derecho en nodo/arista</strong>
                                        <span>Abre men√∫ contextual con opciones</span>
                                    </div>
                                </div>
                                <div class="demo-item">
                                    <div class="demo-icon">üî¢</div>
                                    <div class="demo-text">
                                        <strong>Matriz de adyacencia</strong>
                                        <span>Edita todos los pesos visualmente</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Pesta√±a An√°lisis -->
                <div class="help-tab-content" id="tab-analisis">
                    <div class="help-section">
                        <h3>‚ö° An√°lisis y Algoritmos</h3>
                        <p>Utiliza estas herramientas para analizar y optimizar tu grafo:</p>
                        
                        <div class="algorithm-card">
                            <div class="algorithm-header">
                                <div class="algorithm-icon">üîÑ</div>
                                <div class="algorithm-title">Maximizar/Minimizar (Johnson)</div>
                            </div>
                            <div class="algorithm-content">
                                <p><strong>Prop√≥sito:</strong> Encuentra rutas maximizadas (rojas) y minimizadas (verdes) en el grafo.</p>
                                <div class="algorithm-details">
                                    <div class="detail-item">
                                        <span class="detail-label">Resultados:</span>
                                        <span class="detail-value">Muestra m√©tricas ES|LS en cada nodo</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Controles:</span>
                                        <span class="detail-value">Panel flotante para mostrar/ocultar rutas</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Requisitos:</span>
                                        <span class="detail-value">Grafo dirigido ac√≠clico (DAG)</span>
                                    </div>
                                </div>
                                <div class="path-visualization">
                                    <div class="path-example critical">
                                        <div class="path-color"></div>
                                        <span>Ruta Maximizada (Cr√≠tica)</span>
                                    </div>
                                    <div class="path-example optimal">
                                        <div class="path-color"></div>
                                        <span>Ruta Minimizada (√ìptima)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="algorithm-card">
                            <div class="algorithm-header">
                                <div class="algorithm-icon">üßÆ</div>
                                <div class="algorithm-title">Algoritmo de Asignaci√≥n</div>
                            </div>
                            <div class="algorithm-content">
                                <p><strong>Prop√≥sito:</strong> Resuelve problemas de asignaci√≥n optimizando la suma total de pesos.</p>
                                <div class="algorithm-details">
                                    <div class="detail-item">
                                        <span class="detail-label">Maximizar:</span>
                                        <span class="detail-value">Encuentra asignaci√≥n que maximiza la suma total</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Minimizar:</span>
                                        <span class="detail-value">Encuentra asignaci√≥n que minimiza la suma total</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Basado en:</span>
                                        <span class="detail-value">Algoritmo H√∫ngaro para problemas de asignaci√≥n</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="help-section">
                        <h3>üìä Interpretaci√≥n de Resultados</h3>
                        <div class="results-guide">
                            <div class="result-item">
                                <h4>M√©tricas de Nodos (ES|LS)</h4>
                                <p>Despu√©s de ejecutar el an√°lisis Johnson, cada nodo muestra dos valores:</p>
                                <ul>
                                    <li><strong>ES (Early Start):</strong> Tiempo m√°s temprano en que puede comenzar la actividad</li>
                                    <li><strong>LS (Late Start):</strong> Tiempo m√°s tard√≠o en que puede comenzar sin retrasar el proyecto</li>
                                </ul>
                                <p>La diferencia entre LS y ES es la holgura del nodo.</p>
                            </div>
                            
                            <div class="result-item">
                                <h4>Rutas Resaltadas</h4>
                                <p>El an√°lisis identifica y resalta dos tipos de rutas:</p>
                                <ul>
                                    <li><strong class="critical-text">Ruta Maximizada (Roja):</strong> Secuencia de actividades que determina la duraci√≥n total del proyecto</li>
                                    <li><strong class="optimal-text">Ruta Minimizada (Verde):</strong> Camino m√°s corto desde el inicio hasta el final</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Pesta√±a Herramientas -->
                <div class="help-tab-content" id="tab-herramientas">
                    <div class="help-section">
                        <h3>üíæ Gesti√≥n de Archivos</h3>
                        <div class="tool-grid">
                            <div class="tool-card">
                                <div class="tool-icon">üíæ</div>
                                <div class="tool-title">Exportar</div>
                                <div class="tool-description">Guarda el grafo actual como archivo JSON con nombre personalizado</div>
                                <div class="tool-tip">Los archivos incluyen: nodos, aristas, colores y an√°lisis guardados</div>
                            </div>
                            <div class="tool-card">
                                <div class="tool-icon">üìÇ</div>
                                <div class="tool-title">Importar</div>
                                <div class="tool-description">Carga un grafo previamente guardado desde un archivo JSON</div>
                                <div class="tool-tip">Mantiene todos los an√°lisis y configuraciones del grafo original</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="help-section">
                        <h3>üé® Personalizaci√≥n</h3>
                        <div class="tool-grid">
                            <div class="tool-card">
                                <div class="tool-icon">üé®</div>
                                <div class="tool-title">Colores de Nodos</div>
                                <div class="tool-description">Personaliza el color de todos los nodos del grafo</div>
                                <div class="tool-tip">Usa colores contrastantes para mejor visualizaci√≥n</div>
                            </div>
                            <div class="tool-card">
                                <div class="tool-icon">üîÑ</div>
                                <div class="tool-title">Colores de Aristas</div>
                                <div class="tool-description">Personaliza el color de todas las conexiones</div>
                                <div class="tool-tip">Las rutas cr√≠ticas y √≥ptimas mantienen sus colores distintivos</div>
                            </div>
                            <div class="tool-card">
                                <div class="tool-icon">‚ÜîÔ∏è</div>
                                <div class="tool-title">Tipos de Aristas</div>
                                <div class="tool-description">Cambia entre dirigidas y no dirigidas</div>
                                <div class="tool-tip">Las aristas dirigidas muestran flechas indicando direcci√≥n</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="help-section">
                        <h3>üîß Funciones Avanzadas</h3>
                        <div class="tool-grid">
                            <div class="tool-card">
                                <div class="tool-icon">üî¢</div>
                                <div class="tool-title">Matriz de Adyacencia</div>
                                <div class="tool-description">Vista completa para edici√≥n masiva de pesos</div>
                                <div class="tool-tip">Ideal para modificar m√∫ltiples conexiones r√°pidamente</div>
                            </div>
                            <div class="tool-card">
                                <div class="tool-icon">üßπ</div>
                                <div class="tool-title">Limpieza</div>
                                <div class="tool-description">Elimina todo el grafo para empezar desde cero</div>
                                <div class="tool-tip">Confirmaci√≥n requerida para evitar eliminaciones accidentales</div>
                            </div>
                            <div class="tool-card">
                                <div class="tool-icon">üî≤</div>
                                <div class="tool-title">Grid de Fondo</div>
                                <div class="tool-description">Ayuda visual para alinear nodos correctamente</div>
                                <div class="tool-tip">Facilita la creaci√≥n de grafos ordenados y sim√©tricos</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Pesta√±a Consejos -->
                <div class="help-tab-content" id="tab-consejos">
                    <div class="help-section">
                        <h3>üí° Consejos de Uso</h3>
                        <div class="tips-container">
                            <div class="tip-category">
                                <h4>üîÑ Modo Johnson</h4>
                                <ul>
                                    <li>‚úÖ Usa nombres descriptivos para los nodos para mejor organizaci√≥n</li>
                                    <li>‚úÖ Planifica la disposici√≥n de nodos antes de crear muchas conexiones</li>
                                    <li>‚úÖ Exporta tu trabajo regularmente para evitar p√©rdida de datos</li>
                                    <li>‚úÖ Utiliza los controles de visualizaci√≥n para analizar rutas espec√≠ficas</li>
                                    <li>‚ùå Evita crear bucles o conexiones bidireccionales en este modo</li>
                                </ul>
                            </div>
                            
                            <div class="tip-category">
                                <h4>‚ö° An√°lisis</h4>
                                <ul>
                                    <li>Ejecuta el an√°lisis Johnson despu√©s de completar tu grafo</li>
                                    <li>Usa los controles de ruta para enfocarte en rutas espec√≠ficas</li>
                                    <li>Interpreta las m√©tricas ES|LS para entender las holguras</li>
                                    <li>Compara rutas maximizadas y minimizadas para optimizaci√≥n</li>
                                </ul>
                            </div>
                            
                            <div class="tip-category">
                                <h4>üé® Visualizaci√≥n</h4>
                                <ul>
                                    <li>Usa colores contrastantes para nodos y aristas</li>
                                    <li>Organiza los nodos de forma l√≥gica y espaciada</li>
                                    <li>Aprovecha el grid para alineaci√≥n precisa</li>
                                    <li>Utiliza la matriz para verificar conexiones completas</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="help-section">
                        <h3>üöÄ Flujo de Trabajo Recomendado</h3>
                        <div class="workflow-steps">
                            <div class="workflow-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h4>Planificaci√≥n</h4>
                                    <p>Define los nodos y conexiones necesarias antes de comenzar</p>
                                </div>
                            </div>
                            <div class="workflow-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h4>Construcci√≥n</h4>
                                    <p>Crea los nodos y establece las conexiones con sus pesos</p>
                                </div>
                            </div>
                            <div class="workflow-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h4>Verificaci√≥n</h4>
                                    <p>Revisa la matriz de adyacencia para confirmar las conexiones</p>
                                </div>
                            </div>
                            <div class="workflow-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h4>An√°lisis</h4>
                                    <p>Ejecuta los algoritmos de optimizaci√≥n y revisa los resultados</p>
                                </div>
                            </div>
                            <div class="workflow-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <h4>Exportaci√≥n</h4>
                                    <p>Guarda tu trabajo y comparte los resultados si es necesario</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="help-section">
                        <h3>üîç B√∫squeda R√°pida</h3>
                        <div class="quick-search-tips">
                            <p>Usa la barra de b√∫squeda en la parte superior para encontrar r√°pidamente:</p>
                            <div class="search-tags">
                                <span class="search-tag">Johnson</span>
                                <span class="search-tag">asignaci√≥n</span>
                                <span class="search-tag">matriz</span>
                                <span class="search-tag">exportar</span>
                                <span class="search-tag">colores</span>
                                <span class="search-tag">rutas</span>
                                <span class="search-tag">pesos</span>
                                <span class="search-tag">nodos</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="help-footer">
                <button id="exportPdfBtn" class="help-footer-btn">Exportar Ayuda como PDF</button>
            </div>
        </div>
    </div>
    <!-- Export Modal -->
    <div class="help-modal" id="exportModal" aria-modal="true" role="dialog" aria-labelledby="exportTitle">
        <div class="help-content">
            <div class="help-header">
                <div class="help-title" id="exportTitle">üíæ Exportar Grafo</div>
                <button class="help-close" id="closeExport">&times;</button>
            </div>
            <div class="help-body">
                <label for="exportFileName" class="modal-label">Nombre del archivo (sin extensi√≥n):</label>
                <input type="text" id="exportFileName" class="modal-input" value="grafo" placeholder="grafo" />
            </div>
            <div class="help-footer modal-actions">
                <button id="exportCancel" class="help-footer-btn btn-cancel">Cancelar</button>
                <button id="exportConfirm" class="help-footer-btn">Guardar .json</button>
            </div>
        </div>
    </div>
    <!-- Assignment Modal -->
    <div class="help-modal" id="assignmentModal" aria-modal="true" role="dialog" aria-labelledby="assignmentTitle">
        <div class="help-content">
            <div class="help-header">
                <div class="help-title" id="assignmentTitle">üßÆ Algoritmo de Asignaci√≥n</div>
                <button class="help-close" id="closeAssignment">&times;</button>
            </div>
            <div class="help-body" id="assignmentBody">
                <!-- dynamic content injected by JS -->
            </div>
            <div class="help-footer modal-actions">
                <button id="assignmentCloseBtn" class="help-footer-btn">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- NorthWest Input Modal -->
    <div class="help-modal" id="northwestInputModal" aria-modal="true" role="dialog">
        <div class="help-content nw-input-modal-large">
            <div class="help-header">
                <div class="help-title">üöö Algoritmo NorthWest - Entrada de Datos</div>
                <button class="help-close" id="closeNorthwestInput">&times;</button>
            </div>
            <div class="help-body">
                <!-- Secci√≥n de Importar/Exportar -->
                <div class="nw-import-export-section">
                    <h4>Importar/Exportar Ejercicio</h4>
                    <div class="nw-import-export-buttons">
                        <label for="nwImportFile" class="nw-import-btn">
                            üìÇ Importar (JSON/CSV)
                            <input type="file" id="nwImportFile" accept=".json,.csv" style="display: none;">
                        </label>
                        <button id="nwExportJSON" class="nw-export-btn">üíæ Exportar JSON</button>
                        <button id="nwExportCSV" class="nw-export-btn">üìÑ Exportar CSV</button>
                    </div>
                </div>

                <!-- Tipo de Optimizaci√≥n -->
                <div class="nw-optimization-selector">
                    <label for="nwTipoOpt">Tipo de Optimizaci√≥n:</label>
                    <select id="nwTipoOpt" class="nw-config-select">
                        <option value="minimizar">Minimizar Costo</option>
                        <option value="maximizar">Maximizar Beneficio</option>
                    </select>
                </div>

                <!-- Tabla Din√°mica -->
                <div class="nw-dynamic-table-container">
                    <div class="nw-table-wrapper">
                        <table id="nwDynamicTable" class="nw-editable-table">
                            <thead>
                                <tr id="nwTableHeaderRow">
                                    <th class="nw-corner-cell"></th>
                                    <th class="nw-header-cell">Origen 1</th>
                                    <th class="nw-header-cell">Origen 2</th>
                                    <th class="nw-header-cell">Origen 3</th>
                                    <th class="nw-header-cell">Origen 4</th>
                                    <th class="nw-header-oferta">Oferta</th>
                                </tr>
                            </thead>
                            <tbody id="nwTableBody">
                                <tr>
                                    <td class="nw-row-header">Destino 1</td>
                                    <td><input type="number" class="nw-cell-input" value="5" step="1"></td>
                                    <td><input type="number" class="nw-cell-input" value="5" step="1"></td>
                                    <td><input type="number" class="nw-cell-input" value="8" step="1"></td>
                                    <td><input type="number" class="nw-cell-input" value="9" step="1"></td>
                                    <td><input type="number" class="nw-cell-oferta" value="7" step="1"></td>
                                </tr>
                                <tr>
                                    <td class="nw-row-header">Destino 2</td>
                                    <td><input type="number" class="nw-cell-input" value="8" step="1"></td>
                                    <td><input type="number" class="nw-cell-input" value="5" step="1"></td>
                                    <td><input type="number" class="nw-cell-input" value="4" step="1"></td>
                                    <td><input type="number" class="nw-cell-input" value="10" step="1"></td>
                                    <td><input type="number" class="nw-cell-oferta" value="5" step="1"></td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr id="nwTableFooterRow">
                                    <td class="nw-footer-label">Demanda</td>
                                    <td><input type="number" class="nw-cell-demanda" value="2" step="1"></td>
                                    <td><input type="number" class="nw-cell-demanda" value="1" step="1"></td>
                                    <td><input type="number" class="nw-cell-demanda" value="5" step="1"></td>
                                    <td><input type="number" class="nw-cell-demanda" value="4" step="1"></td>
                                    <td class="nw-corner-cell"></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>

                <!-- Botones de Control de Tabla -->
                <div class="nw-table-controls">
                    <button id="nwAddRow" class="nw-control-btn nw-add-btn">‚ûï Agregar Fila</button>
                    <button id="nwAddColumn" class="nw-control-btn nw-add-btn">‚ûï Agregar Columna</button>
                    <button id="nwRemoveRow" class="nw-control-btn nw-remove-btn">‚ûñ Eliminar Fila</button>
                    <button id="nwRemoveColumn" class="nw-control-btn nw-remove-btn">‚ûñ Eliminar Columna</button>
                    <button id="nwReset" class="nw-control-btn nw-reset-btn">üîÑ Resetear</button>
                    <button id="nwCalculate" class="nw-control-btn nw-calculate-btn">üöÄ Calcular Soluci√≥n</button>
                </div>

                <!-- Secci√≥n de Resultados (Oculta por defecto) -->
                <div id="nwResultsSection" class="nw-results-section hidden">
                    <div class="nw-results-divider"></div>
                    <h3 class="nw-results-header">üìä Resultados del Algoritmo</h3>
                    <div id="nwResultsContent" class="nw-results-content">
                        <!-- Los resultados se insertar√°n aqu√≠ din√°micamente -->
                    </div>
                </div>
            </div>
            <div class="help-footer modal-actions">
                <button id="northwestInputCancelBtn" class="help-footer-btn btn-cancel">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- NorthWest Results Modal -->
    <div class="help-modal" id="northwestModal" aria-modal="true" role="dialog">
        <div class="help-content nw-results-modal">
            <div class="help-header">
                <div class="help-title">üöö Algoritmo NorthWest - Resultados</div>
                <button class="help-close" id="closeNorthwest">&times;</button>
            </div>
            <div class="help-body" id="northwestBody">
                <!-- dynamic content injected by JS -->
            </div>
            <div class="help-footer modal-actions">
                <button id="northwestCloseBtn" class="help-footer-btn">Cerrar</button>
            </div>
        </div>
    </div>

    <script src="app.js" defer></script>
    <script>
    // Modo Asignaci√≥n: alternancia y visual
    document.addEventListener('DOMContentLoaded', function() {
        let isAssignmentMode = false;
        const assignmentBtn = document.getElementById('toggleAssignmentMode');
        const modeBtn = document.getElementById('toggleMode');
        assignmentBtn.addEventListener('click', function() {
            isAssignmentMode = !isAssignmentMode;
            if (isAssignmentMode) {
                assignmentBtn.textContent = 'üßÆ Modo: Asignaci√≥n (activo)';
                assignmentBtn.classList.add('johnson-mode');
                modeBtn.disabled = true;
                showModeNotification('Modo Asignaci√≥n activado: puedes ingresar n√∫meros negativos en las aristas.');
                window.isAssignmentMode = true;
            } else {
                assignmentBtn.textContent = 'üßÆ Modo: Asignaci√≥n';
                assignmentBtn.classList.remove('johnson-mode');
                modeBtn.disabled = false;
                showModeNotification('Modo Asignaci√≥n desactivado.');
                window.isAssignmentMode = false;
            }
        });
        // Exponer variable global para app.js
        window.isAssignmentMode = false;
    });
    // Notificaci√≥n visual reutilizable
    function showModeNotification(message) {
        document.querySelectorAll('.mode-notification').forEach(el => el.remove());
        const notification = document.createElement('div');
        notification.className = 'mode-notification';
        notification.textContent = message;
        document.body.appendChild(notification);
        setTimeout(() => { notification.remove(); }, 3000);
    }
    </script>
    
    <script>
        // Funcionalidad mejorada para la ayuda
        document.addEventListener('DOMContentLoaded', function() {
            // Navegaci√≥n por pesta√±as
            const tabs = document.querySelectorAll('.help-tab');
            const tabContents = document.querySelectorAll('.help-tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Remover clase activa de todas las pesta√±as y contenidos
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Activar pesta√±a y contenido seleccionados
                    tab.classList.add('active');
                    document.getElementById(`tab-${tabId}`).classList.add('active');
                });
            });
            
            // Funcionalidad de b√∫squeda
            const searchInput = document.getElementById('helpSearch');
            const searchResults = document.getElementById('searchResults');
            
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const query = this.value.toLowerCase().trim();
                    
                    if (query.length < 2) {
                        searchResults.innerHTML = '';
                        searchResults.classList.remove('active');
                        return;
                    }
                    
                    // Buscar en todo el contenido de ayuda
                    const helpContent = document.querySelector('.help-body').textContent.toLowerCase();
                    const sections = document.querySelectorAll('.help-section');
                    
                    let resultsHTML = '';
                    let resultCount = 0;
                    
                    sections.forEach(section => {
                        const sectionTitle = section.querySelector('h3')?.textContent || '';
                        const sectionContent = section.textContent.toLowerCase();
                        
                        if (sectionContent.includes(query)) {
                            resultCount++;
                            // Encontrar el p√°rrafo o elemento m√°s relevante
                            const paragraphs = section.querySelectorAll('p, li');
                            let bestMatch = '';
                            
                            paragraphs.forEach(p => {
                                if (p.textContent.toLowerCase().includes(query) && !bestMatch) {
                                    bestMatch = p.textContent.substring(0, 150) + '...';
                                }
                            });
                            
                            if (!bestMatch) {
                                bestMatch = sectionContent.substring(0, 150) + '...';
                            }
                            
                            // Determinar en qu√© pesta√±a est√° esta secci√≥n
                            const tabContent = section.closest('.help-tab-content');
                            const tabId = tabContent ? tabContent.id.replace('tab-', '') : 'basico';
                            const tabNames = {
                                'basico': 'B√°sico',
                                'analisis': 'An√°lisis',
                                'herramientas': 'Herramientas',
                                'consejos': 'Consejos'
                            };
                            
                            resultsHTML += `
                                <div class="search-result" data-tab="${tabId}">
                                    <div class="result-title">${sectionTitle}</div>
                                    <div class="result-preview">${bestMatch}</div>
                                    <div class="result-tab">Pesta√±a: ${tabNames[tabId]}</div>
                                </div>
                            `;
                        }
                    });
                    
                    if (resultCount > 0) {
                        searchResults.innerHTML = resultsHTML;
                        searchResults.classList.add('active');
                        
                        // Agregar event listeners a los resultados
                        document.querySelectorAll('.search-result').forEach(result => {
                            result.addEventListener('click', function() {
                                const tabId = this.getAttribute('data-tab');
                                
                                // Cambiar a la pesta√±a correspondiente
                                tabs.forEach(t => t.classList.remove('active'));
                                tabContents.forEach(c => c.classList.remove('active'));
                                
                                document.querySelector(`.help-tab[data-tab="${tabId}"]`).classList.add('active');
                                document.getElementById(`tab-${tabId}`).classList.add('active');
                                
                                // Resaltar la secci√≥n
                                const sectionTitle = this.querySelector('.result-title').textContent;
                                const sectionElement = document.querySelector(`.help-section h3:contains("${sectionTitle}")`)?.closest('.help-section');
                                
                                if (sectionElement) {
                                    sectionElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    sectionElement.style.backgroundColor = 'rgba(0, 247, 255, 0.1)';
                                    sectionElement.style.transition = 'background-color 0.5s';
                                    
                                    setTimeout(() => {
                                        sectionElement.style.backgroundColor = '';
                                    }, 2000);
                                }
                                
                                // Cerrar resultados de b√∫squeda
                                searchResults.classList.remove('active');
                                searchInput.value = '';
                            });
                        });
                    } else {
                        searchResults.innerHTML = '<div class="no-results">No se encontraron resultados</div>';
                        searchResults.classList.add('active');
                    }
                });
                
                // Cerrar resultados al hacer clic fuera
                document.addEventListener('click', function(e) {
                    if (!e.target.closest('.help-search-container')) {
                        searchResults.classList.remove('active');
                    }
                });
            }
        });
    </script>
</body>
</html>